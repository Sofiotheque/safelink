for (var ads=document.querySelectorAll('sof.trading'),i=0;i<ads.length;i++){if(ads[i]){function round(n,r){var o=Math.pow(10,r||0);return Math.round(n*o)/o} const  rbase = 4.5,dtime = new Date(&#39;<data:post.date.iso8601/>&#39;); var countscale = (dtime.getTime().toString().substring(7,9) + 1) / 101,<b:if cond='data:post.enclosures any (l =&gt; l.url in {&quot;http://rc.post&quot;})'><b:loop index='i' values='data:post.enclosures' var='enclosure'><b:if cond='data:enclosure.url == &quot;http://rc.post&quot;'>ratecount = <data:enclosure.mimeType/>,</b:if></b:loop><b:else/>ratecount = round((parseInt(dtime.getTime().toString().substring(6,9))+1) * countscale),</b:if>rateratio= dtime.getTime().toString().substring(4,6),<b:if cond='data:post.enclosures any (l =&gt; l.url in {&quot;http://ra.post&quot;})'><b:loop index='i' values='data:post.enclosures' var='enclosure'><b:if cond='data:enclosure.url == &quot;http://ra.post&quot;'>ratevalue = <data:enclosure.mimeType/>;</b:if></b:loop><b:else/>ratevalue = ( Math.round(rateratio * (5-rbase)) / 100) + rbase,ratevalue = round(ratevalue,1);</b:if> let jsonLdScript = document.querySelector(&#39;script[role=rating]&#39;), jsonld = JSON.parse(jsonLdScript.innerText), ratevl = document.querySelector(&#39;#post-rating span.rate-value&#39;), ratecnt = document.querySelector(&#39;#post-rating span.rate-count&#39;), ratestar = document.querySelector(&#39;#post-rating span.score&#39;); jsonld.aggregateRating.ratingValue = ratevalue,jsonld.aggregateRating.ratingCount = ratecount; let newJson = JSON.stringify(jsonld); jsonLdScript.innerHTML = newJson,ratevl.innerHTML = ratevalue,ratecnt.innerHTML = ratecount,ratestar.style.width = ratevalue * 17 + &quot;px&quot;;}};
